<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Automating Code Transformation With jscodeshift | Widen Engineering</title>
  <meta name="description" content="Tired of manual refactoring? This article shows how to automate code transformations using jscodeshift to reduce manual work when performing refactors.">

  <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">

<link rel="manifest" href="/assets/images/favicon/manifest.json"">

<meta name="msapplication-TileColor" content="#B72822">
<meta name="msapplication-TileImage" content="/assets/images/favicon/ms-icon-144x144.png" | relative_url }}">
<meta name="theme-color" content="#B72822">

  <link rel="stylesheet" href="/assets/css/app.css">
  <link rel="canonical" href="https://engineering.widen.com/blog/Automating-Code-Transformation-With-jscodeshift/">
  <link rel="alternate" type="application/rss+xml" title="Widen Engineering" href="/feed.xml" />
</head>


  <body>

    <div class="full-width">
      <header class="site-header" role="banner">
  <div class="wrapper">
    <div class="logo">
      <a href="/">
        <img width="400" alt="Widen Engineering Logo" src="https://embed.widencdn.net/img/widen/c17yrvuaac/400px@2x/Widen Engineering White Logo.png?u=mcuc7i">
      </a>
    </div>
    
      <a class="subscribe" target="_blank" title="Email Subscription" href="https://feedburner.google.com/fb/a/mailverify?uri=WidenEngineering">Subscribe to Updates</a>
    
  </div>
</header>

    </div>

    <div class="wrapper">

      <main class="content" role="main">

        <div class="post">
    <header>
        <h1><a title="Automating Code Transformation With jscodeshift" href="/blog/Automating-Code-Transformation-With-jscodeshift/">Automating Code Transformation With jscodeshift</a></h1>
        <time datetime="2021-01-21T00:00:00-06:00">Jan 21, 2021</time> • Mark Skelton
    </header>

    <article role="article">

      <p>The JavaScript ecosystem is fast paced and continuously changing. By the time you finish adopting some fancy new library, another library has come along with people telling you to drop everything and adopt it. Even if you pick a library and stick with it, breaking changes happen from time to time, which add great new features but sometimes mean a long or painful refactor.</p>

<p>As a developer, there are a few ways of dealing with this problem. The first approach would be to never update your libraries so you don’t have to spend time on updates. While this might save you some time, it also means you won’t be getting security updates or access to new features that could save time in other ways. Another approach would be to always update your libraries to the latest versions soon after they come out. While this is better than the previous approach, it also means you will be spending a lot of extra time refactoring your applications.</p>

<p>In this article, I’ll discuss a third approach, which uses a tool called jscodeshift to automate code transformation to speed up refactoring so you can take advantage of new libraries or updates without having to manually migrate your project(s).</p>

<p><em>You can find the code from this article, as well as an example Jest test suite, in the <a href="https://github.com/Widen/jscodeshift-example">accompanying GitHub repo</a>.</em></p>

<h2 id="introduction-to-jscodeshift">Introduction to jscodeshift</h2>

<p><a href="https://github.com/facebook/jscodeshift">jscodeshift</a> is a tool created by Facebook that provides a simple API to perform abstract syntax tree (AST) transformations on your project’s source files. We can use these APIs to create custom “codemods” to transform our code for whatever needs we have. An example of this might be removing an imported variable from a library and instead importing it from a file in your project. The code block below demonstrates this example, which I’ll use for the remainder of this article.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Input</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuery</span><span class="p">,</span> <span class="nx">queryCache</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Output</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useQuery</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">queryClient</span> <span class="k">as</span> <span class="nx">queryCache</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">common/queryClient</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="getting-started-with-jscodeshift">Getting started with jscodeshift</h2>

<p>Hopefully, by now, you have an idea of the purpose of jscodeshift, so let’s dive in and write an example codemod from scratch to solve the use case I showed in the last code block.</p>

<p>First, we need to install jscodeshift.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> jscodeshift
</code></pre></div></div>

<p>This will install jscodeshift globally so we can run it for any project. Next, let’s create a file called <code class="language-plaintext highlighter-rouge">transform.js</code> with the following boilerplate for our codemod.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// transform.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fileInfo</span><span class="p">,</span> <span class="nx">api</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="nx">jscodeshift</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">j</span><span class="p">(</span><span class="nx">fileInfo</span><span class="p">.</span><span class="nx">source</span><span class="p">);</span>

  <span class="c1">// Your transformations go here</span>

  <span class="k">return</span> <span class="nx">source</span><span class="p">.</span><span class="nx">toSource</span><span class="p">();</span>
<span class="p">};</span>
</code></pre></div></div>

<p>You don’t need to understand this boilerplate in great depth, but a quick explanation of its purpose doesn’t hurt. jscodeshift expects that transform scripts export a function that will accept two arguments with the file information and the jscodeshift API. We can then call the <code class="language-plaintext highlighter-rouge">api.jscodeshift</code> method (which we alias as <code class="language-plaintext highlighter-rouge">j</code>), passing it the input file source code. Our transformations would be the next step of the codemod, but for now we won’t do anything. Finally, we’ll call <code class="language-plaintext highlighter-rouge">toSource(),</code> which will convert the transformed AST back into a string, which jscodeshift will write back to the input file.</p>

<p>If any of that was confusing, don’t worry. This boilerplate is pretty much the same for all codemods, so the important part to learn is the actual code transformation portion.</p>

<h2 id="applying-transformations">Applying transformations</h2>

<p>When writing codemods, it’s often best to break up the problem into each part and then tackle each part separately. This is especially helpful when writing a large codemod with lots of steps and options. For this codemod, there are two steps we need to take:</p>

<ol>
  <li>Remove the <code class="language-plaintext highlighter-rouge">queryCache</code> variable from the <code class="language-plaintext highlighter-rouge">react-query</code> import, if it exists.</li>
  <li>If <code class="language-plaintext highlighter-rouge">queryCache</code> was imported, add a new import declaration to import it from the new location.</li>
</ol>

<p>We’ll start with step 1, but first let’s do a quick review of the AST for our example file. Below is a rough outline of the AST, which shows that our file has an <code class="language-plaintext highlighter-rouge">ImportDeclaration</code> node that contains two <code class="language-plaintext highlighter-rouge">ImportSpecifier</code> nodes. Each import specifier has an <code class="language-plaintext highlighter-rouge">imported</code> name and a <code class="language-plaintext highlighter-rouge">local</code> name that will be important for step 2.</p>

<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">-</span> ImportDeclaration:
<span class="p">  -</span> source
<span class="p">    -</span> Literal
<span class="p">      -</span> value: react-query
<span class="p">  -</span> specifiers [2]
<span class="p">    -</span> ImportSpecifier
<span class="p">      -</span> imported
<span class="p">        -</span> Identifier
<span class="p">          -</span> name: useQuery
<span class="p">      -</span> local
<span class="p">        -</span> Identifier
<span class="p">          -</span> name: useQuery
<span class="p">    -</span> ImportSpecifier
<span class="p">      -</span> imported
<span class="p">        -</span> Identifier
<span class="p">          -</span> name: queryCache
<span class="p">      -</span> local
<span class="p">        -</span> Identifier
<span class="p">          -</span> name: queryCache
</code></pre></div></div>

<p><em>To see the AST of the source code in your project(s), check out <a href="https://astexplorer.net">AST Explorer</a> which provides a fantastic AST visualizer.</em></p>

<h3 id="removing-the-querycache-variable">Removing the <code class="language-plaintext highlighter-rouge">queryCache</code> variable</h3>

<p>Now that we know what our AST looks like, we can get down to business writing our transformation. To remove the <code class="language-plaintext highlighter-rouge">queryCache</code> import specifier from the <code class="language-plaintext highlighter-rouge">react-query</code> import, use the jscodeshift <code class="language-plaintext highlighter-rouge">find</code>, <code class="language-plaintext highlighter-rouge">filter</code>, and <code class="language-plaintext highlighter-rouge">remove</code> methods using the following three steps.</p>

<ol>
  <li>Find all the import specifiers in the file.</li>
  <li>Filter to just the <code class="language-plaintext highlighter-rouge">queryCache</code> import specifier from the <code class="language-plaintext highlighter-rouge">react-query</code> import.</li>
  <li>Remove the <code class="language-plaintext highlighter-rouge">queryCache</code> import specifier.</li>
</ol>

<p>This would look like this in our <code class="language-plaintext highlighter-rouge">transform.js</code> file.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Your transformations go here</span>
<span class="nx">source</span>
  <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">ImportSpecifier</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">imported</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">queryCache</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="testing-our-first-change">Testing our first change</h3>

<p>Before we move on, let’s test our change to verify it’s correctly removing the <code class="language-plaintext highlighter-rouge">queryCache</code> variable. To do this, create a file called <code class="language-plaintext highlighter-rouge">test.js</code> and add the following content:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useQuery</span><span class="p">,</span> <span class="nx">queryCache</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>Next, transform the file using the following shell command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jscodeshift <span class="nt">-t</span> transform.js test.js
</code></pre></div></div>

<p>After running that command, we should see that <code class="language-plaintext highlighter-rouge">test.js</code> has changed to the following:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useQuery</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>Awesome! We’ve now successfully completed the first step of removing the <code class="language-plaintext highlighter-rouge">queryCache</code> variable from the <code class="language-plaintext highlighter-rouge">react-query</code> import. Now, let’s move on to step 2.</p>

<h3 id="adding-the-new-import">Adding the new import</h3>

<p>To add the new import, we first need to track if we removed a <code class="language-plaintext highlighter-rouge">queryCache</code> variable from the <code class="language-plaintext highlighter-rouge">react-query</code> import. Do this by checking the <code class="language-plaintext highlighter-rouge">length</code> property of the collection returned from our code in step 1.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">specifiers</span> <span class="o">=</span> <span class="nx">source</span>
  <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">ImportSpecifier</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">imported</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">queryCache</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">remove</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">specifiers</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Add new import</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Next, we need to find the <code class="language-plaintext highlighter-rouge">react-query</code> import so we can insert our new import after it. This logic will look very similar to our logic in step 1 where we found the import specifier.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Add new import</span>
<span class="nx">source</span>
  <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">ImportDeclaration</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>Finally, we can call the <code class="language-plaintext highlighter-rouge">insertAfter</code> function to insert our new import after the existing <code class="language-plaintext highlighter-rouge">react-query</code> import. The value that we pass to <code class="language-plaintext highlighter-rouge">insertAfter</code> can be any valid AST node, which we can easily create thanks to the helper functions provided by jscodeshift.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">source</span>
  <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">ImportDeclaration</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">insertAfter</span><span class="p">(</span>
    <span class="nx">j</span><span class="p">.</span><span class="nx">importDeclaration</span><span class="p">(</span>
      <span class="p">[</span>
        <span class="nx">j</span><span class="p">.</span><span class="nx">importSpecifier</span><span class="p">(</span>
          <span class="nx">j</span><span class="p">.</span><span class="nx">identifier</span><span class="p">(</span><span class="dl">"</span><span class="s2">queryClient</span><span class="dl">"</span><span class="p">),</span>
          <span class="nx">j</span><span class="p">.</span><span class="nx">identifier</span><span class="p">(</span><span class="dl">"</span><span class="s2">queryCache</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">),</span>
      <span class="p">],</span>
      <span class="nx">j</span><span class="p">.</span><span class="nx">stringLiteral</span><span class="p">(</span><span class="dl">"</span><span class="s2">common/queryClient</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">);</span>
</code></pre></div></div>

<p><em>When creating new AST nodes, using AST Explorer helps to understand the shape of nodes so you can more easily create them using the jscodeshift helper methods.</em></p>

<h2 id="putting-it-all-together">Putting it all together</h2>

<p>If we put all of this together, our final file should look something like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">api</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="nx">jscodeshift</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">j</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">source</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">specifiers</span> <span class="o">=</span> <span class="nx">source</span>
    <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">ImportSpecifier</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">imported</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">queryCache</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">remove</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">specifiers</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">source</span>
      <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">ImportDeclaration</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">react-query</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">insertAfter</span><span class="p">(</span>
        <span class="nx">j</span><span class="p">.</span><span class="nx">importDeclaration</span><span class="p">(</span>
          <span class="p">[</span>
            <span class="nx">j</span><span class="p">.</span><span class="nx">importSpecifier</span><span class="p">(</span>
              <span class="nx">j</span><span class="p">.</span><span class="nx">identifier</span><span class="p">(</span><span class="dl">"</span><span class="s2">queryClient</span><span class="dl">"</span><span class="p">),</span>
              <span class="nx">j</span><span class="p">.</span><span class="nx">identifier</span><span class="p">(</span><span class="dl">"</span><span class="s2">queryCache</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">),</span>
          <span class="p">],</span>
          <span class="nx">j</span><span class="p">.</span><span class="nx">stringLiteral</span><span class="p">(</span><span class="dl">"</span><span class="s2">common/queryClient</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">source</span><span class="p">.</span><span class="nx">toSource</span><span class="p">();</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Congratulations! We’ve just created our first codemod using jscodeshift!</p>

<h2 id="conclusion">Conclusion</h2>

<p>In this article, we explored how to use jscodeshift to automate code transformations to simplify refactors. While the example I showed might not be useful to you, it should give you an idea of what you can do with jscodeshift. If you want to see a more complex codemod, check out the <a href="https://github.com/mskelton/prop-types-to-ts">PropTypes to TS</a> project I created.</p>

<p>Thanks for reading! If you have any questions or comments, feel free to leave them below. Also, if you want the chance to work with some cool people and technology, come <a href="https://www.widen.com/careers">join us</a>!</p>

<h2 id="bonus-type-definitions">Bonus: Type definitions</h2>

<p>Since remembering all the available jscodeshift methods is not easy, jscodeshift provides type definitions out of the box! All you have to do is add a JSDoc comment to specify the types of the parameters and your editor will now autocomplete the available methods!</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * @param {import('jscodeshift').FileInfo} fileInfo
 * @param {import('jscodeshift').API} api
 */</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fileInfo</span><span class="p">,</span> <span class="nx">api</span><span class="p">)</span> <span class="p">{};</span>
</code></pre></div></div>


    </article>

    
      
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'widen-engineering';
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


    
</div>


      </main>

    </div>

    <div class="full-width">
      <div class="wrapper">
    <footer class="site-footer" role="contentinfo">
        <nav>
          <ul class="inline">
          
            
          
            
          
            
          
            
            <li>
                <a href="/open-source">Open Source Guidelines</a>
            </li>
            
          
            
          
            
          
            
          
          </ul>
          <br/>
        </nav >
        <nav aria-label="Social media links">
          <ul class="site-social-links inline">
              <li><a target="_blank" title="RSS Feed" href="/feed.xml"><ion-icon name="logo-rss"></ion-icon></a></li>
              <li><a target="_blank" title="GitHub" href="https://github.com/widen"><ion-icon name="logo-github"></ion-icon></a></li>
              <li><a target="_blank" title="Twitter" href="https://twitter.com/widendev"><ion-icon name="logo-twitter"></ion-icon></a></li>
          </ul>
        </nav>
        <p>© Copyright 2021, <a title="Widen Homepage" target="_blank" href="http://widen.com">Widen Enterprises, Inc.</a></p>
        <p><strong>Looking for work?</strong> <a title="Come engineer with us!" target="_blank" href="http://www.widen.com/careers/">Come engineer with us!</a></p>
        
<p><strong>Something wrong with this page?</strong> Please <a title="Create new issue on bugtracker" target="_blank" href="https://github.com/widen/widen.github.io/issues/new">file a bug</a>.</p>
<div class="git-info">
<nav aria-label="Site source and page information">
  <ul class="inline">
    <li>
        <a target="_blank" title="View site source on GitHub" href="https://github.com/widen/widen.github.io">source</a>
    </li>
    <li>
        <a target="_blank" title="View current page on GitHub" href="https://github.com/widen/widen.github.io/blob/master/_posts/2021-01-21-Automating-Code-Transformation-With-jscodeshift.md">view</a>
    </li>
    <li>
        <a target="_blank" title="Edit current page on GitHub" href="https://github.com/widen/widen.github.io/edit/master/_posts/2021-01-21-Automating-Code-Transformation-With-jscodeshift.md">edit</a>
    </li>
    <li>
        <a target="_blank" title="Last site commit" href="https://github.com/widen/widen.github.io/commit/"></a>
    </li>
    <li>
        <a target="_blank" title="Last page commit" href="https://github.com/widen/widen.github.io/commit/"></a>
    </li>
  </ul>
  </nav >
</div>


    </footer>
</div>

    </div>

    
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1206716-19']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


    <script src="https://unpkg.com/ionicons@5.1.2/dist/ionicons.js"></script>


  </body>

</html>
